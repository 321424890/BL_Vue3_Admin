<template>
  <div class="crystal-select-complete-demo">
    <div class="demo-header">
      <h1 class="page-title">CrystalSelect ç»„ä»¶</h1>
      <p class="page-description">åŸºäº Element Plus å°è£…çš„å¢å¼ºå‹ä¸‹æ‹‰é€‰æ‹©ç»„ä»¶ï¼Œæ”¯æŒå•é€‰ã€å¤šé€‰ã€è‡ªå®šä¹‰é€‰é¡¹ã€å›¾æ ‡ç­‰åŠŸèƒ½</p>
    </div>

    <el-row :gutter="24">
      <!-- 1. åŸºç¡€é€‰æ‹©å™¨ -->
      <el-col :xs="24" :sm="12" :md="8" :lg="12">
        <div class="demo-card">
          <h3>åŸºç¡€é€‰æ‹©</h3>
          <p class="demo-desc">æ ‡å‡†çš„å•é€‰ä¸‹æ‹‰é€‰æ‹©å™¨</p>
          <CrystalSelect
            v-model="basicValue"
            :options="basicOptions"
            placeholder="è¯·é€‰æ‹©"
            clearable
            style="width: 100%"
          ></CrystalSelect>
        </div>
      </el-col>

      <!-- 2. å¸¦å›¾æ ‡çš„é€‰é¡¹ -->
      <el-col :xs="24" :sm="12" :md="8" :lg="12">
        <div class="demo-card">
          <h3>å›¾æ ‡æ”¯æŒ</h3>
          <p class="demo-desc">é€‰é¡¹å‰æ˜¾ç¤ºæç¤ºå›¾æ ‡</p>
          <CrystalSelect
            v-model="iconValue"
            :options="iconOptions"
            placeholder="é€‰æ‹©å¸¦å›¾æ ‡çš„é€‰é¡¹"
            style="width: 100%"
          ></CrystalSelect>
        </div>
      </el-col>

      <!-- 3. å¤šé€‰æ¨¡å¼ -->
      <el-col :xs="24" :sm="12" :md="8" :lg="12">
        <div class="demo-card">
          <h3>å¤šé€‰åŠŸèƒ½</h3>
          <p class="demo-desc">å¯é€‰æ‹©å¤šä¸ªé€‰é¡¹å¹¶ä»¥æ ‡ç­¾å½¢å¼æ˜¾ç¤º</p>
          <CrystalSelect
            v-model="multipleValue"
            :options="basicOptions"
            placeholder="å¯å¤šé€‰"
            multiple
            collapse-tags
            style="width: 100%"
          ></CrystalSelect>
        </div>
      </el-col>

      <!-- 4. å¸¦æè¿°çš„é€‰é¡¹ -->
      <el-col :xs="24" :sm="12" :md="8" :lg="12">
        <div class="demo-card">
          <h3>æè¿°æ–‡æœ¬</h3>
          <p class="demo-desc">ä¸ºé€‰é¡¹æ·»åŠ è¯¦ç»†æè¿°ä¿¡æ¯</p>
          <CrystalSelect
            v-model="descValue"
            :options="descOptions"
            placeholder="é€‰æ‹©å¸¦æè¿°çš„é€‰é¡¹"
            style="width: 100%"
          ></CrystalSelect>
        </div>
      </el-col>

      <!-- 5. è‡ªå®šä¹‰é€‰é¡¹å†…å®¹ -->
      <el-col :xs="24" :sm="12" :md="8" :lg="12">
        <div class="demo-card">
          <h3>è‡ªå®šä¹‰é€‰é¡¹æ¸²æŸ“</h3>
          <p class="demo-desc">ä½¿ç”¨æ’æ§½å®Œå…¨è‡ªå®šä¹‰é€‰é¡¹å¤–è§‚</p>
          <CrystalSelect v-model="customValue" :options="customOptions" placeholder="é€‰æ‹©ç”¨æˆ·" style="width: 100%">
            <template #option="{ option }">
              <div class="custom-option-content">
                <div class="custom-avatar">{{ option?.name?.charAt(0) || "?" }}</div>
                <div class="custom-info">
                  <div class="custom-name">{{ option?.name || "" }}</div>
                  <div class="custom-meta">{{ option?.role || "" }}</div>
                </div>
              </div>
            </template>
          </CrystalSelect>
        </div>
      </el-col>
      <!-- 6. ç©ºçŠ¶æ€è‡ªå®šä¹‰ -->
      <el-col :xs="24" :sm="12" :md="8" :lg="12">
        <div class="demo-card">
          <h3>ç©ºçŠ¶æ€ä¸åŠ è½½çŠ¶æ€</h3>
          <p class="demo-desc">è‡ªå®šä¹‰æ— æ•°æ®æ—¶çš„æ˜¾ç¤ºå†…å®¹</p>
          <CrystalSelect
            v-model="emptyValue"
            :options="emptyOptions"
            :loading="isLoading"
            loading-text="æ­£åœ¨åŠ è½½..."
            placeholder="æš‚æ— é€‰é¡¹"
            style="width: 100%"
          >
            <template #empty>
              <div class="empty-content">
                <span class="empty-icon">ğŸ“­</span>
                <span>æš‚æ— å¯ç”¨é€‰é¡¹</span>
                <el-button size="small" @click="loadData">åŠ è½½æ•°æ®</el-button>
              </div>
            </template>
          </CrystalSelect>
        </div>
      </el-col>
      <!-- 7. å¸¦é¢œè‰²å°åœ†çš„é€‰é¡¹ -->
      <el-col :xs="24" :sm="12" :md="8" :lg="12">
        <div class="demo-card">
          <h3>é¢œè‰²å°åœ†æ ‡è®°</h3>
          <p class="demo-desc">é€‰é¡¹å‰æ˜¾ç¤ºå¸¦é¢œè‰²çš„å°åœ†æ ‡è®°</p>
          <CrystalSelect
            v-model="colorDotValue"
            :options="colorDotOptions"
            placeholder="é€‰æ‹©å¸¦é¢œè‰²å°åœ†çš„é€‰é¡¹"
            style="width: 100%"
          >
            <template #option="{ option }">
              <div class="color-dot-option">
                <div class="color-dot" :style="{ backgroundColor: option.color }"></div>
                <span>{{ option.label }}</span>
              </div>
            </template>
          </CrystalSelect>
        </div>
      </el-col>
    </el-row>

    <!-- ç»„ä»¶æ–‡æ¡£ -->
    <div class="component-docs">
      <h3>CrystalSelect ç»„ä»¶æ–‡æ¡£</h3>

      <div class="doc-section">
        <h4>æ”¯æŒçš„å±æ€§</h4>
        <p>CrystalSelect ç»„ä»¶æ”¯æŒä»¥ä¸‹å±æ€§ï¼š</p>
        <BasicTable
          :table-data="propsTableData"
          :columns="propsColumns"
          basic-height="400px"
          :border="true"
          :stripe="true"
          :show-pagination="false"
        />
      </div>

      <div class="doc-section">
        <h4>æ”¯æŒçš„äº‹ä»¶</h4>
        <p>CrystalSelect ç»„ä»¶æ”¯æŒä»¥ä¸‹äº‹ä»¶ï¼š</p>
        <BasicTable
          :table-data="eventsTableData"
          :columns="eventsColumns"
          basic-height="300px"
          :border="true"
          :stripe="true"
          :show-pagination="false"
        />
      </div>

      <div class="doc-section">
        <h4>æ”¯æŒçš„æ–¹æ³•</h4>
        <p>CrystalSelect ç»„ä»¶æ”¯æŒä»¥ä¸‹æ–¹æ³•ï¼š</p>
        <BasicTable
          :table-data="methodsTableData"
          :columns="methodsColumns"
          basic-height="200px"
          :border="true"
          :stripe="true"
          :show-pagination="false"
        />
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from "vue"
// import CrystalSelect from "@/components/CrystalSelect/index.vue"
import { CrystalSelect } from "crystal-ui"
// import "crystal-ui/index.css"
import BasicTable from "@/components/BasicTable/BasicTable.vue"
// åŸºç¡€é€‰é¡¹æ•°æ®
const basicOptions = [
  { label: "é€‰é¡¹ä¸€", value: "opt1" },
  { label: "é€‰é¡¹äºŒ", value: "opt2" },
  { label: "é€‰é¡¹ä¸‰", value: "opt3" },
  { label: "ç¦ç”¨é€‰é¡¹", value: "opt4", disabled: true },
  { label: "é€‰é¡¹äº”", value: "opt5" }
]

// å¸¦å›¾æ ‡é€‰é¡¹æ•°æ®
// å›¾æ ‡æ”¯æŒé€‰é¡¹
const iconOptions = [
  { label: "è­¦å‘Š", value: "warning", prefixIcon: "el-icon-warning", iconColor: "#e6a23c" },
  { label: "æ–‡æ¡£", value: "document", prefixIcon: "el-icon-document", iconColor: "#409eff" },
  { label: "ç”¨æˆ·", value: "user", prefixIcon: "el-icon-user", iconColor: "#67c23a" },
  { label: "æ—¶é’Ÿ", value: "timer", prefixIcon: "el-icon-timer", iconColor: "#909399" },
  { label: "æˆåŠŸ", value: "success", prefixIcon: "el-icon-circle-check", iconColor: "#67c23a" },
  { label: "è­¦å‘Šæç¤º", value: "warning-brown", prefixIcon: "el-icon-circle-close", iconColor: "#9d6942" }
]

// å¸¦æè¿°é€‰é¡¹æ•°æ®
const descOptions = [
  { label: "åŸºç¡€ç‰ˆ", value: "basic", description: "é€‚åˆä¸ªäººä½¿ç”¨" },
  { label: "ä¸“ä¸šç‰ˆ", value: "pro", description: "é€‚åˆå›¢é˜Ÿåä½œ" },
  { label: "ä¼ä¸šç‰ˆ", value: "enterprise", description: "é€‚åˆå¤§å‹ç»„ç»‡" }
]

// è‡ªå®šä¹‰ç”¨æˆ·æ•°æ®
const customOptions = [
  { name: "å¼ ä¸‰", role: "äº§å“ç»ç†", value: "user1" },
  { name: "æå››", role: "UIè®¾è®¡å¸ˆ", value: "user2" },
  { name: "ç‹äº”", role: "å‰ç«¯å¼€å‘", value: "user3" },
  { name: "èµµå…­", role: "åç«¯å¼€å‘", value: "user4" }
]

// å¸¦é¢œè‰²å°åœ†é€‰é¡¹æ•°æ®
const colorDotOptions = [
  { label: "æˆåŠŸçŠ¶æ€", value: "success", color: "#67c23a" },
  { label: "è­¦å‘ŠçŠ¶æ€", value: "warning", color: "#e6a23c" },
  { label: "å±é™©çŠ¶æ€", value: "danger", color: "#f56c6c" },
  { label: "ä¿¡æ¯çŠ¶æ€", value: "info", color: "#409eff" },
  { label: "æ¬¡è¦çŠ¶æ€", value: "secondary", color: "#909399" },
  { label: "è¤è‰²çŠ¶æ€", value: "brown", color: "#9d6942" }
]

// å“åº”å¼çŠ¶æ€æ•°æ®
const basicValue = ref("")
const multipleValue = ref<string[]>([])
const iconValue = ref("")
const descValue = ref("")
const disabledValue = ref("")
const loadingValue = ref("")
const customValue = ref("")
const colorDotValue = ref("")

// å±æ€§è¡¨æ ¼æ•°æ®
const propsTableData = ref([
  { prop: "modelValue / v-model", type: "string/array", default: "''", description: "ç»‘å®šå€¼" },
  { prop: "options", type: "array", default: "[]", description: "é€‰é¡¹åˆ—è¡¨" },
  { prop: "placeholder", type: "string", default: "'è¯·é€‰æ‹©'", description: "å ä½æ–‡æœ¬" },
  { prop: "multiple", type: "boolean", default: "false", description: "æ˜¯å¦å¤šé€‰" },
  { prop: "clearable", type: "boolean", default: "false", description: "æ˜¯å¦å¯æ¸…é™¤" },
  { prop: "disabled", type: "boolean", default: "false", description: "æ˜¯å¦ç¦ç”¨" },
  { prop: "loading", type: "boolean", default: "false", description: "æ˜¯å¦åŠ è½½ä¸­" },
  { prop: "loading-text", type: "string", default: "'åŠ è½½ä¸­'", description: "åŠ è½½æ–‡æœ¬" },
  { prop: "size", type: "string", default: "'default'", description: "å°ºå¯¸ï¼Œå¯é€‰å€¼ä¸º large, default, small" },
  { prop: "collapse-tags", type: "boolean", default: "false", description: "å¤šé€‰æ—¶æ˜¯å¦æŠ˜å æ ‡ç­¾" },
  { prop: "filterable", type: "boolean", default: "false", description: "æ˜¯å¦å¯æœç´¢" },
  { prop: "remote", type: "boolean", default: "false", description: "æ˜¯å¦ä¸ºè¿œç¨‹æœç´¢" },
  { prop: "remote-method", type: "Function", default: "-", description: "è¿œç¨‹æœç´¢æ–¹æ³•" },
  { prop: "multiple-limit", type: "number", default: "0", description: "å¤šé€‰æ—¶æœ€å¤šé€‰æ‹©çš„æ•°é‡" },
  { prop: "no-data-text", type: "string", default: "'æ— æ•°æ®'", description: "æ— æ•°æ®æ—¶çš„æ–‡æœ¬" },
  { prop: "no-match-text", type: "string", default: "'æ— åŒ¹é…æ•°æ®'", description: "æœç´¢æ— åŒ¹é…æ—¶çš„æ–‡æœ¬" }
])

// å±æ€§è¡¨æ ¼åˆ—é…ç½®
const propsColumns = ref([
  { prop: "prop", label: "å±æ€§å", width: 200 },
  { prop: "type", label: "ç±»å‹", width: 200 },
  { prop: "default", label: "é»˜è®¤å€¼", width: 120 },
  { prop: "description", label: "è¯´æ˜", minWidth: 300 }
])

// äº‹ä»¶è¡¨æ ¼æ•°æ®
const eventsTableData = ref([
  { event: "change", description: "é€‰ä¸­å€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘", params: "value: string|array" },
  { event: "visible-change", description: "ä¸‹æ‹‰æ¡†å‡ºç°/éšè—æ—¶è§¦å‘", params: "visible: boolean" },
  { event: "remove-tag", description: "å¤šé€‰æ¨¡å¼ä¸‹ç§»é™¤æ ‡ç­¾æ—¶è§¦å‘", params: "tag: object" },
  { event: "clear", description: "å¯æ¸…ç©ºæ¨¡å¼ä¸‹ç‚¹å‡»æ¸…ç©ºæŒ‰é’®æ—¶è§¦å‘", params: "-" },
  { event: "blur", description: "å¤±å»ç„¦ç‚¹æ—¶è§¦å‘", params: "event: FocusEvent" },
  { event: "focus", description: "è·å¾—ç„¦ç‚¹æ—¶è§¦å‘", params: "event: FocusEvent" }
])

// äº‹ä»¶è¡¨æ ¼åˆ—é…ç½®
const eventsColumns = ref([
  { prop: "event", label: "äº‹ä»¶å", width: 150 },
  { prop: "description", label: "è¯´æ˜", minWidth: 300 },
  { prop: "params", label: "å›è°ƒå‚æ•°", width: 200 }
])

// æ–¹æ³•è¡¨æ ¼æ•°æ®
const methodsTableData = ref([
  { method: "focus", description: "ä½¿é€‰æ‹©å™¨è·å¾—ç„¦ç‚¹", params: "-" },
  { method: "blur", description: "ä½¿é€‰æ‹©å™¨å¤±å»ç„¦ç‚¹", params: "-" },
  { method: "clear", description: "æ¸…ç©ºé€‰æ‹©å™¨çš„å€¼", params: "-" },
  { method: "filter", description: "æ‰‹åŠ¨è¿‡æ»¤é€‰é¡¹", params: "query: string" }
])

// æ–¹æ³•è¡¨æ ¼åˆ—é…ç½®
const methodsColumns = ref([
  { prop: "method", label: "æ–¹æ³•å", width: 150 },
  { prop: "description", label: "è¯´æ˜", minWidth: 300 },
  { prop: "params", label: "å‚æ•°", width: 200 }
])
const emptyValue = ref("")
const emptyOptions = ref([])
const isLoading = ref(false)

// æ¨¡æ‹ŸåŠ è½½æ•°æ®å‡½æ•°
const loadData = () => {
  isLoading.value = true
  setTimeout(() => {
    emptyOptions.value = [
      { label: "æ–°åŠ è½½çš„é€‰é¡¹1", value: "new1" },
      { label: "æ–°åŠ è½½çš„é€‰é¡¹2", value: "new2" }
    ]
    isLoading.value = false
  }, 1500)
}
</script>

<style scoped>
.crystal-select-complete-demo {
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.demo-header {
  text-align: center;
  margin-bottom: 30px;
  padding: 20px 0;
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.08);
}

.page-title {
  font-size: 28px;
  color: #303133;
  margin-bottom: 10px;
  font-weight: 600;
}

.page-description {
  color: #606266;
  font-size: 14px;
  line-height: 1.6;
  max-width: 800px;
  margin: 0 auto;
}

.demo-card {
  background-color: #f9f9f9;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  width: 100%;
}

.demo-card:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  transform: translateY(-2px);
}

.demo-card h3 {
  font-size: 16px;
  font-weight: 500;
  color: #303133;
  margin-bottom: 10px;
}

.demo-desc {
  color: #606266;
  font-size: 14px;
  margin-bottom: 15px;
  line-height: 1.4;
}

/* è‡ªå®šä¹‰é€‰é¡¹æ ·å¼ */
.custom-option-content {
  display: flex;
  align-items: center;
  gap: 10px;
}

.custom-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background-color: #409eff;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 500;
}

.custom-info {
  flex: 1;
}

.custom-name {
  font-weight: 500;
  color: #303133;
}

.custom-meta {
  font-size: 12px;
  color: #909399;
}

/* ç©ºçŠ¶æ€æ ·å¼ */
.empty-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 20px;
}

.empty-icon {
  font-size: 48px;
}

/* é¢œè‰²å°åœ†æ ·å¼ */
.color-dot-option {
  display: flex;
  align-items: center;
  gap: 10px;
}

.color-dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

/* ç»„ä»¶æ–‡æ¡£æ ·å¼ */
.component-docs {
  margin-top: 40px;
  padding: 20px;
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.08);
}

.component-docs h3 {
  font-size: 24px;
  color: #303133;
  margin-bottom: 20px;
  text-align: center;
  font-weight: 600;
}

.doc-section {
  margin-bottom: 30px;
  padding: 20px;
  background-color: #f9f9f9;
  border-radius: 8px;
}

.doc-section h4 {
  font-size: 18px;
  color: #303133;
  margin-bottom: 15px;
  font-weight: 600;
}

.doc-section p {
  color: #606266;
  margin-bottom: 20px;
  font-size: 14px;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .crystal-select-complete-demo {
    padding: 10px;
  }

  .demo-header {
    padding: 15px 10px;
  }

  .page-title {
    font-size: 24px;
  }

  .demo-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .demo-card {
    padding: 16px;
  }

  .component-docs {
    padding: 15px;
  }

  .doc-section {
    padding: 15px;
  }
}
</style>
